<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Event Tools</title>
</head>
<body>
    <div class="hamburger-menu left">
        <button class="hamburger-btn" onclick="toggleMenu()">&#9776;</button>
        <div id="menuDropdown" class="sidebar-menu">
            <button onclick="showNewEventModal()" class="sidebar-item">New Event</button>
        </div>
    </div>

    <div id="newEventModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-title">Start New Event?</div>
            <div class="modal-text">This will clear all teams, scores, and schedule data.</div>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="confirmNewEvent()">Yes, Start Fresh</button>
                <button class="btn btn-secondary" onclick="closeNewEventModal()">Cancel</button>
            </div>
        </div>
    </div>

    <div class="container flex flex-col items-center" style="justify-content: center; min-height: 100vh;">
        <h1>Event tools</h1>
        <p class="text-muted mb-4">Tools for events</p>
        <div class="flex gap-2" style="flex-wrap: wrap; justify-content: center;">
            <button class="btn btn-primary" onclick="window.location.href='teamgen.html'">Team Generator</button>
            <button class="btn btn-primary" onclick="window.location.href='scoring.html'">Scoring</button>
            <button class="btn btn-primary" onclick="window.location.href='timer.html'">Timer</button>
            <button class="btn btn-primary" onclick="window.location.href='schedule.html'">Schedule</button>
            <button class="btn btn-primary" onclick="window.location.href='picker.html'">Random Picker</button>
        </div>
        <button class="btn btn-secondary mt-4" onclick="playAttention()" style="padding: 1rem 2rem;">
            Attention
        </button>
    </div>

    <script>

        function toggleMenu() {
            const menu = document.getElementById('menuDropdown');
            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
                document.body.style.overflow = '';
            } else {
                menu.classList.add('open');
                document.body.style.overflow = 'hidden';
            }
        }

        // Close sidebar when clicking outside or on menu item
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('menuDropdown');
            const hamburger = e.target.closest('.hamburger-menu');
            if (!hamburger && menu.classList.contains('open')) {
                menu.classList.remove('open');
                document.body.style.overflow = '';
            }
        });
        // Also close sidebar when clicking a menu item
        document.querySelectorAll('.sidebar-item').forEach(btn => {
            btn.addEventListener('click', () => {
                document.getElementById('menuDropdown').classList.remove('open');
                document.body.style.overflow = '';
            });
        });

        function showNewEventModal() {
            document.getElementById('newEventModal').style.display = 'flex';
        }

        function closeNewEventModal() {
            document.getElementById('newEventModal').style.display = 'none';
        }

        function confirmNewEvent() {
            localStorage.removeItem('eventToolsTeams');
            localStorage.removeItem('eventToolsScoring');
            localStorage.removeItem('eventToolsSchedule');
            closeNewEventModal();
        }
        function playAttention() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                }, i * 400);
            }
            
            if (navigator.vibrate) {
                navigator.vibrate([200, 100, 200, 100, 200]);
            }
        }
    </script>
</body>
</html>